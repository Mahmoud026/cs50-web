{% extends 'newyear/base.html' %}
{% load i18n %}
{% block title %}{% trans 'Holiday Checker' %}{% endblock %}
{% block pre_content %}
    <div id="greeting" style="font-size:1.1rem;color:#aee6fa;margin-bottom:0.7em;"></div>
{% endblock %}
{% block content %}
    <h1 class="landing-title">
        {% trans 'What would you like to check?' %}
        <span dir="rtl" lang="ar" style="margin-left:0.5em;">{% language 'ar' %}{% trans 'What would you like to check?' %}{% endlanguage %}</span>
    </h1>
    <form method="post" action="" style="margin-top:2em;" aria-label="Subscribe for event reminders">
        {% csrf_token %}
        <label for="email" style="color:#aee6fa;font-size:1rem;">
            {% trans 'Get event reminders by email:' %}
            <span dir="rtl" lang="ar">{% language 'ar' %}{% trans 'Get event reminders by email:' %}{% endlanguage %}</span>
        </label><br>
        <input type="email" id="email" name="email" required placeholder="{% trans 'Your email' %} / {% language 'ar' %}{% trans 'Your email' %}{% endlanguage %}" style="margin:0.5em 0;padding:0.5em 1em;border-radius:0.5em;border:none;max-width:220px;">
        <button type="submit" class="event-link" style="display:inline-block;width:auto;padding:0.5em 1.2em;margin-left:0.5em;">
            {% trans 'Subscribe' %} / <span dir="rtl" lang="ar">{% language 'ar' %}{% trans 'Subscribe' %}{% endlanguage %}</span>
        </button>
    </form>
    {% if messages %}
        <ul style="list-style:none;padding:0;margin:1em 0 0 0;">
            {% for message in messages %}
                <li style="color:#7fd7ff;font-size:1rem;">
                    {{ message }}
                    <span dir="rtl" lang="ar">{% language 'ar' %}{{ message }}{% endlanguage %}</span>
                </li>
            {% endfor %}
        </ul>
    {% endif %}
    {% if fact %}
        <div style="margin:1.2em 0 0 0;padding:0.8em 1.2em;background:rgba(30,34,54,0.85);color:#aee6fa;border-radius:1em;font-size:1.05rem;max-width:420px;margin-left:auto;margin-right:auto;">
            <span style="font-size:1.2em;">ðŸ’¡</span> {{ fact }}
        </div>
    {% endif %}
{% endblock %}
{% block extra_js %}
<script>
    // Personalized greeting based on local time
    const greetingDiv = document.getElementById('greeting');
    if (greetingDiv) {
        const now = new Date();
        const hour = now.getHours();
        let greeting = '{% trans "Hello!" %}';
        if (hour < 12) greeting = '{% trans "Good morning!" %}';
        else if (hour < 18) greeting = '{% trans "Good afternoon!" %}';
        else greeting = '{% trans "Good evening!" %}';
        greetingDiv.textContent = greeting;
    }
</script>
{% endblock %} 