{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% trans 'Holiday Checker' %}{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'newyear/styles.css' %}">
</head>
<body class="{% block body_class %}newyear-bg{% endblock %}">
    <main>
        <div class="landing-container">
            <div style="text-align:right;margin-bottom:0.5em;display:flex;justify-content:flex-end;align-items:center;gap:1em;">
                <form action="" method="get" id="lang-form" style="margin:0;">
                    <select name="lang" id="lang-select" aria-label="{% trans 'Select language' %}" style="padding:0.3em 0.7em;border-radius:0.5em;">
                        <option value="en" {% if LANGUAGE_CODE == 'en' %}selected{% endif %}>{% trans 'English' %}</option>
                        <option value="ar" {% if LANGUAGE_CODE == 'ar' %}selected{% endif %}>{% trans 'Arabic' %}</option>
                    </select>
                </form>
                <form action="" method="get" id="tz-form" style="margin:0;">
                    <label for="tz-select" class="sr-only">{% trans 'Select time zone' %}</label>
                    <select name="tz" id="tz-select" aria-label="{% trans 'Select time zone' %}" style="padding:0.3em 0.7em;border-radius:0.5em;">
                        <option value="UTC" {% if tz == 'UTC' or not tz %}selected{% endif %}>UTC</option>
                        <option value="Asia/Riyadh" {% if tz == 'Asia/Riyadh' %}selected{% endif %}>Asia/Riyadh</option>
                        <option value="Europe/London" {% if tz == 'Europe/London' %}selected{% endif %}>Europe/London</option>
                        <option value="America/New_York" {% if tz == 'America/New_York' %}selected{% endif %}>America/New_York</option>
                        <option value="Asia/Kolkata" {% if tz == 'Asia/Kolkata' %}selected{% endif %}>Asia/Kolkata</option>
                        <option value="Asia/Tokyo" {% if tz == 'Asia/Tokyo' %}selected{% endif %}>Asia/Tokyo</option>
                    </select>
                </form>
                <button id="theme-toggle" aria-label="Toggle dark/light mode" style="background:none;border:none;cursor:pointer;font-size:1.5em;outline:none;">
                    <span id="theme-icon">üåô</span>
                </button>
            </div>
            {% if tz %}
                <div style="text-align:right;font-size:0.95em;color:#aee6fa;margin-bottom:0.5em;">{% trans 'Current time zone:' %} <strong>{{ tz }}</strong></div>
            {% endif %}
            <nav aria-label="Main event navigation" role="navigation">
                <div class="event-links">
                    <a class="event-link" href="/newyear/check/" aria-label="Check if today is New Year" role="button">
                        <span style="font-size:1.5em;vertical-align:middle;">üéâ</span> {% trans 'New Year' %} / <span dir="rtl" lang="ar">{% language 'ar' %}{% trans 'New Year' %}{% endlanguage %}</span>
                    </a>
                    <a class="event-link" href="/newyear/eid-fitr/" aria-label="Check if today is Eid al-Fitr" role="button">
                        <span style="font-size:1.5em;vertical-align:middle;">üåô</span> {% trans 'Eid al-Fitr' %} / <span dir="rtl" lang="ar">{% language 'ar' %}{% trans 'Eid al-Fitr' %}{% endlanguage %}</span>
                    </a>
                    <a class="event-link" href="/newyear/eid-adha/" aria-label="Check if today is Eid al-Adha" role="button">
                        <span style="font-size:1.5em;vertical-align:middle;">üïã</span> {% trans 'Eid al-Adha' %} / <span dir="rtl" lang="ar">{% language 'ar' %}{% trans 'Eid al-Adha' %}{% endlanguage %}</span>
                    </a>
                    <a class="event-link" href="/newyear/ramadan/" aria-label="Check if today is Ramadan" role="button">
                        <span style="font-size:1.5em;vertical-align:middle;">üïå</span> {% trans 'Ramadan' %} / <span dir="rtl" lang="ar">{% language 'ar' %}{% trans 'Ramadan' %}{% endlanguage %}</span>
                    </a>
                </div>
            </nav>
            {% block pre_content %}{% endblock %}
            {% block content %}{% endblock %}
        </div>
    </main>
    <script>
        // Language switcher
        document.getElementById('lang-select').addEventListener('change', function() {
            const lang = this.value;
            const url = new URL(window.location.href);
            url.searchParams.set('lang', lang);
            window.location.href = url.toString();
        });
        // Time zone switcher
        document.getElementById('tz-select').addEventListener('change', function() {
            const tz = this.value;
            const url = new URL(window.location.href);
            url.searchParams.set('tz', tz);
            window.location.href = url.toString();
        });
        // Dark/Light mode toggle
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = document.getElementById('theme-icon');
        function setTheme(mode) {
            if (mode === 'light') {
                document.body.classList.add('light-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
            } else {
                document.body.classList.remove('light-mode');
                themeIcon.textContent = 'üåô';
            }
            localStorage.setItem('theme', mode);
        }
        // Load theme preference
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) setTheme(savedTheme);
        themeToggle.addEventListener('click', function() {
            const isLight = document.body.classList.contains('light-mode');
            setTheme(isLight ? 'dark' : 'light');
        });
    </script>
</body>
</html> 